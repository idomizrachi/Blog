<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap Start -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
          crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.3/font/bootstrap-icons.css">
  <!-- Bootstrap End -->

  <!-- Prism Start -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/themes/prism.min.css" rel="stylesheet"/>
  <link href="style/prism-vsc-dark-plus.css" rel="stylesheet"/>
  <!-- Prism End -->

  <!-- My Style -->
  <link href="style/style.css" rel="stylesheet" />

  <title>Ido Mizrachi - iOS Dev</title>
</head>
<body>

<!-- Top navigation -->
<nav class="navbar navbar-dark bg-white justify-content-center">
    <div class="conatiner-fluid">
        <ul class="nav justify-content-center border-bottom pb-3 mb-3 mt-2">
            <li class="nav-item mx-2"><a href="index.html" class="nav-link">All Posts</a></li>
            <li class="nav-item mx-2"><a href="tags.html" class="nav-link">Tags</a></li>
            <li class="nav-item mx-2"><a href="about.html" class="nav-link">About Me</a></li>
        </ul>
    </div>
</nav>


<!-- Posts -->
<main class="container">
  <div class="row">
    <div class="col">
      <div class="blog-post-title">Unit tests and the butterfly effect</div>
      <div class="blog-post-date">Posted on 14 Jun 2022</div>
      <div class="blog-post-tags">#iOS #Swift #Unit Tests #Generics </div>
      <article class="blog-post">
        <h3>Remarks</h3>
<hr>
<p>
<span>111Audiance</span><span>: iOS developers - mid to senior level</span><br><span>What is the problem/pain:</span><br><span>Changes in code are fragile</span><br><strong>What do I want to share:</strong><br><span>Unit tests takes some time to set up and get use to</span><br><span>but when it works it saves time and prevents bugs</span><br><span>We need to be able to move fast</span></p>
<p>
<span>XXX</span><br><br></p>
<p>
<span>XXX</span></p>
<p>
<span>What we can‚Äôt do/won‚Äôt do:</span><br><span>We can not perform full ma regression testing on every feature</span></p>
<p>
<span>Unit tests should run fast and test a small part of logic</span></p>
<p>
<span>Meet our hero‚Ä¶.</span><br><span>oh no‚Ä¶</span><br><span>conflict - changes are pain</span></p>
<p>
<span>what can he do?</span><br><span>X to the rescue</span></p>
<p>
<span>What did we achived - no more fear of changes</span></p>
<p>
<span>https://giphy.com/gifs/fail-pyramid-collapse-PtuayrkI1dKYo</span></p>
<h2>Content</h2>
<p>
<span>Thursday night, the phone rings someone asks for a small changes in the app</span><br><span>that should only take few minutes.</span><br><span>I do it‚Ä¶.</span><br><span>release</span></p>
<p>
<span>and ‚Ä¶. crisis</span></p>
<p>
<span>luckliy we have unit tests</span></p>
<p>
<span>in the end - i drank my cup of wine</span></p>
<h1>Apples and Butterflies</h1>
<p>
<span>Our story begin on Friday night.</span></p>
<p>
<span>Me and my wife got ready for a fun movie night, the pizza was hot and the wine was cold.</span></p>
<figure class="video_container">
  <video alt="Hungry Date Night GIF by Paperless Post" src="https://media4.giphy.com/media/ZDEDeQMqjm5oOygzgb/giphy.mp4?cid=790b761150ff00760f21ffd804d0f0d369112ab1eafa031e&amp;rid=giphy.mp4&amp;ct=g" poster="https://media4.giphy.com/media/ZDEDeQMqjm5oOygzgb/giphy_s.gif?cid=790b761150ff00760f21ffd804d0f0d369112ab1eafa031e&amp;rid=giphy_s.gif&amp;ct=g" autoplay="" loop="" playsinline="" style="width: 500px; height: 500px; left: 0px; top: 0px;"></video>
</figure>

<p>
<span>and then </span><strong>the phone rang</strong><span>.</span></p>
<blockquote class="blockquote"><p>

> Hey Ido, we need this very very very small fix in the mobile app for like tomorrow morning.
> can you make it please, be our savior, the customer really really really need this fix‚Ä¶</p></blockquote>
<p>
<img src="https://media.giphy.com/media/V3TtZ4IWyVZgk/giphy.gif" alt="Puss in boots"></p>
<blockquote class="blockquote"><p>

> Well, ok I answered, I will do it right away.</p></blockquote>
<p>
<span>I sat down by the laptop, ‚ÄúThis doesn‚Äôt sound too complicated‚Äù, I thought to myself.</span></p>
<p>
<img src="https://i.ytimg.com/vi/MXcMV-d_2Js/maxresdefault.jpg" alt="One Hour Later"></p>
<p>
<span>The issue was done, quick sanity check and release, right?</span></p>
<p>
<strong>It was a very short article if it was right</strong></p>
<p>
<span>3 Hours later the phone rang again to find out that this very very very small fix caused a big issue in some area I would have never think it could effect, but it did.</span></p>
<p>
<span>If only there was some way to guard us from these kind of events?</span><br><span>There is‚Ä¶. and luckily this story is fictional, and in my daily routine I write and run Unit Tests & Automation Tests a lot.</span></p>
<p>
<span>For now lets focus on Unit Tests.</span></p>
<pre><code class="language-plaintext highlighter-rouge">
[09:35:14]: ‚ñ∏ Test Succeeded
+--------------------+------+
|       Test Results        |
+--------------------+------+
| Number of tests    | 5794 |
| Number of failures | 0    |
+--------------------+------+

</code></pre>
<p>
<span>Yes, 5794 (at the time writing this article)</span></p>
<h2>Unit Tests, for a mobile app? Seriously, I can just test it manually in 5 minutes</h2>
<p>
<span>This might be true if the mobile app is small, but as the app gets bigger in code base and features a complete manual testing cycle can take several days.</span></p>
<p>
<span>It seems to me that unit tests for mobile app are not a consensus yet.</span></p>
<p>
<span>Assuming most of us already working on existing app or code base, the first challenge is adding unit tests for the first time.</span></p>
<p>
<span>Unit tests has some prerequisites that takes time to implement, but it doesn‚Äôt mean that the case should be </span><strong>all</strong><span> or </span><strong>none</strong><span>.</span></p>
<p>
<span>Some of the existing code might not built for testing, and changing it might be a little tricky.</span><br><span>The main pattern I use to allow components to be tested is </span><span>Dependency Injection</span><span>.</span></p>
<h2>But writing tests takes time</h2>
<p>
<span>Yes, it is true.</span><br><span>Writing tests takes time, sometimes it can even take longer than the time it took to write the code it is testing.</span><br><span>But it is a time well invested in the future of the code base.</span></p>
<h2>Unit Tests saves me money?</h2>
<p>
<span>We all know that time is money.</span></p>
<p>
<span>Every test we add will run in the future on every code change.</span><br><span>When an issue will be found by a unit test, it is caught in an early stage of the development, what usually makes it easier to fix.</span><br><span>Comparing issue found by unit tests to tracing an issue on an end-user after the app was released, or even compared to feedback from the QA team unit tests are much faster to trace and fix.</span></p>
<p>
<span>So unit tests saves time which also means they save money (developers / qa time has a cost).</span></p>

      </article>
    </div>
  </div>
</main>

<!-- Footer -->
<footer class="py-3 my-4 border-top">
    <p class="text-center text-muted" style="font-size: 0.9rem">Congrats. You've reached the bottom of the page üëè</p>
    <p class="text-center text-muted" style="font-size: 0.9rem">Find me also on: <a href="https://twitter.com/idomizrachi" class="text-muted">Twitter <i class="bi bi-twitter"></i></a> and <a href="https://github.com/idomizrachi" class="text-muted">Github <i class="bi bi-github"></i></a></p>
</footer>


</body>
</html>
